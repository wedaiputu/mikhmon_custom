document.addEventListener("DOMContentLoaded", function () {
  var sidenav = document.getElementById("sidenav");
  var main = document.getElementById("main");
  var openNav = document.getElementById("openNav");
  var closeNav = document.getElementById("closeNav");
  var menu = document.getElementsByClassName("menu");
  var dropdownbtn = document.getElementsByClassName("dropdown-btn");
  var dropdownContainer = document.getElementsByClassName("dropdown-container");

  if (!openNav || !closeNav || !sidenav || !main) {
    console.error("Elemen yang diperlukan tidak ditemukan.");
    return;
  }

  openNav.addEventListener("click", function () {
    var width = window.innerWidth;

    if (width < 800) {
      main.style.marginLeft = "0";
      sidenav.style.width = "210px";
      sidenav.style.borderRight = "1px solid #4300BD";
    } else {
      main.style.marginLeft = "210px";
      sidenav.style.width = "210px";
      sidenav.style.borderRight = "1px solid #4300BD";
    }

    for (var i = 0; i < menu.length; i++) {
      menu[i].style.display = "block";
    }
    for (var i = 0; i < dropdownbtn.length; i++) {
      dropdownbtn[i].style.display = "block";
    }
    for (var i = 0; i < dropdownContainer.length; i++) {
      dropdownContainer[i].style.display = "";
    }

    openNav.style.display = "none";
    closeNav.style.display = "block";
  });

  closeNav.addEventListener("click", function () {
    main.style.marginLeft = "0";
    sidenav.style.width = "0";
    sidenav.style.borderRight = "0";

    for (var i = 0; i < menu.length; i++) {
      menu[i].style.display = "none";
    }
    for (var i = 0; i < dropdownbtn.length; i++) {
      dropdownbtn[i].style.display = "none";
    }
    for (var i = 0; i < dropdownContainer.length; i++) {
      dropdownContainer[i].style.display = "none";
    }

    openNav.style.display = "block";
    closeNav.style.display = "none";
  });
});

// Fungsi untuk menutup sidebar
closeNav.addEventListener("click", function () {
  main.style.marginLeft = "0";
  sidenav.style = "width: 0; border-right: 0";

  for (i = 0; i < menu.length; i++) menu[i].style.display = "none";
  for (i = 0; i < dropdownbtn.length; i++)
    dropdownbtn[i].style.display = "none";
  for (i = 0; i < dropdownContainer.length; i++)
    dropdownContainer[i].style.display = "none";

  openNav.style.display = "block";
  closeNav.style.display = "none";
});

// Event untuk menyesuaikan tampilan berdasarkan ukuran layar
window.onresize = function () {
  var width = window.innerWidth;

  if (width < 800) {
    main.style.marginLeft = "0";
    sidenav.style = "width: 0; border-right: 0";

    for (i = 0; i < menu.length; i++) menu[i].style.display = "none";
    for (i = 0; i < dropdownbtn.length; i++)
      dropdownbtn[i].style.display = "none";
    for (i = 0; i < dropdownContainer.length; i++)
      dropdownContainer[i].style.display = "none";

    openNav.style.display = "block";
    closeNav.style.display = "none";
  } else {
    main.style.marginLeft = "210px";
    sidenav.style = "width: 210px; border-right: 1px solid #4300BD";

    for (i = 0; i < menu.length; i++) menu[i].style.display = "block";
    for (i = 0; i < dropdownbtn.length; i++)
      dropdownbtn[i].style.display = "block";
    for (i = 0; i < dropdownContainer.length; i++)
      dropdownContainer[i].style.display = "";

    openNav.style.display = "none";
    closeNav.style.display = "block";
  }
};

// Fungsi untuk dropdown menu
var dropdown = document.getElementsByClassName("dropdown-btn");

for (i = 0; i < dropdown.length; i++) {
  dropdown[i].addEventListener("click", function () {
    this.classList.toggle("active");
    var dropdownContent = this.nextElementSibling;

    dropdownContent.style.display =
      dropdownContent.style.display === "block" ? "none" : "block";
  });
}
